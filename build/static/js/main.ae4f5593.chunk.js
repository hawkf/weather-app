(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{66:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(13),r=a.n(o),i=a(15),s=a(10),l=a(33),u=a(34),d=a(9),j="weather-app/setLocation",p="weather-app/setCoordinates",f="weather-app/setWeekWeathers",b="weather-app/setIsLocationCorrect",h="weather-app/setIsDataUpdated",m=function(e){return{type:j,payload:e}},O=function(e){return{type:p,payload:e}},x=function(e){return{type:f,payload:e}},v=function(e){return{type:b,payload:e}},y=function(e){return{type:h,payload:e}},w={location:"",coordinates:{lat:null,lng:null},weekWeathers:null,isLocationCorrect:!0,isDataUpdated:!1};var _=a(35),N=a.n(_),g=(a(66),a(20)),D=a(3),W="/",k="/week",C="19c1274fa4a283da3c684631c6063f69",L="weather",U="onecall",E=a(14);var M=a(1);var S=Object(s.b)((function(e){return{location:e.location}}),(function(e){return{setLocation:function(t){e(m(t))}}}))((function(e){var t=e.setLocation,a=e.location,c=Object(n.useState)(a),o=Object(E.a)(c,2),r=o[0],i=o[1],s=function(e,t){var a=Object(n.useState)(e),c=Object(E.a)(a,2),o=c[0],r=c[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){r(e)}),t);return function(){clearTimeout(a)}}),[e,t]),o}(r,500);return Object(n.useEffect)((function(){a!==s&&t(s)}),[s,t,a]),Object(M.jsx)("form",{onSubmit:function(e){e.preventDefault()},className:"location-form",children:Object(M.jsx)("input",{value:r,onChange:function(e){return function(e){e.preventDefault(),i(e.currentTarget.value)}(e)},className:"location-form__input",type:"text",placeholder:"Location name"})})}));function T(e){var t=e.temperature,a=e.description,n=e.date;return Object(M.jsxs)("li",{className:"result-information__item",children:[Object(M.jsx)("p",{className:"result-information__date",children:n}),Object(M.jsx)("p",{className:"result-information__temperature",children:t}),Object(M.jsx)("p",{className:"result-information__description",children:a})]})}var Y=a(36),I=a.n(Y),A=a(37),J=a.n(A),q=function(e){return function(t,a,n){n.get(L,{params:{q:e,appid:C}}).then((function(e){var a=e.data;t(O({lat:a.coord.lon,lon:a.coord.lon})),t(v(!0)),t(y(!1))})).catch((function(e){t(v(!1)),t(y(!0))}))}},B=function(e){var t=e.lat,a=e.lon;return function(e,n,c){c.get(U,{params:{lat:t,lon:a,exclude:"hourly,minutely",units:"metric",appid:C}}).then((function(t){var a=t.data;e(x(function(e){var t=I()(new Date),a=e.map((function(e,a){return{date:t.add(a,"day").format("D MMMM YYYY"),temperature:Math.round(e.temp.day),description:e.weather[0].main}}));return a.pop(),a}(a.daily.slice()))),e(y(!0))})).catch((function(){return J()("An error occurred while loading data")}))}};function R(e){var t=e.isDay,a=Object(D.f)();return Object(M.jsxs)("div",{className:"change-buttons",children:[Object(M.jsx)("button",{className:"change-buttons__item ".concat(t?"change-buttons__item--active":""),onClick:function(){a.push(W)},children:"Day"}),Object(M.jsx)("button",{className:"change-buttons__item ".concat(t?"":"change-buttons__item--active"),onClick:function(){a.push(k)},children:"Week"})]})}var z=Object(s.b)((function(e){return{locationName:e.location,coordinates:e.coordinates,weekWeathers:e.weekWeathers,isDataUpdated:e.isDataUpdated,isLocationCorrect:e.isLocationCorrect}}),(function(e){return{getCoordinates:function(t){e(O({lat:null,lon:null})),e(x(null)),e(q(t))},setWeekWeather:function(t){e(B(t))}}}))((function(e){var t=e.getCoordinates,a=e.setWeekWeather,c=e.locationName,o=e.coordinates,r=e.weekWeathers,i=e.isDataUpdated,s=e.isLocationCorrect;return Object(n.useEffect)((function(){""===c||i||t(c)}),[t,c,i]),Object(n.useEffect)((function(){null===o.lat||null===o.lon||i||a(o)}),[a,o,i]),null==r?Object(M.jsxs)("main",{className:"main-page",children:[Object(M.jsx)(R,{isDay:!0}),Object(M.jsx)(S,{}),Object(M.jsx)("section",{className:"result-information",children:!s&&Object(M.jsx)("p",{children:"Location not found"})})]}):Object(M.jsxs)("main",{className:"main-page",children:[Object(M.jsx)(R,{isDay:!0}),Object(M.jsx)(S,{}),Object(M.jsxs)("section",{className:"result-information",children:[Object(M.jsx)("h2",{className:"result-information__title",children:c}),Object(M.jsx)("ul",{className:"result-information__list",children:Object(M.jsx)(T,{temperature:r[0].temperature,description:r[0].description,date:r[0].date})})]})]})}));var F=Object(s.b)((function(e){return{locationName:e.location,coordinates:e.coordinates,weekWeathers:e.weekWeathers,isDataUpdated:e.isDataUpdated,isLocationCorrect:e.isLocationCorrect}}),(function(e){return{getCoordinates:function(t){e(O({lat:null,lon:null})),e(x(null)),e(q(t))},setWeekWeather:function(t){e(B(t))}}}))((function(e){var t=e.getCoordinates,a=e.setWeekWeather,c=e.locationName,o=e.coordinates,r=e.weekWeathers,i=e.isDataUpdated,s=e.isLocationCorrect;return Object(n.useEffect)((function(){i||""===c||t(c)}),[t,c,i]),Object(n.useEffect)((function(){null===o.lat||null===o.lon||i||a(o)}),[a,o,i]),null==r?Object(M.jsxs)("main",{className:"main-page",children:[Object(M.jsx)(R,{isDay:!0}),Object(M.jsx)(S,{}),Object(M.jsx)("section",{className:"result-information",children:!s&&Object(M.jsx)("p",{children:"Location not found"})})]}):Object(M.jsxs)("main",{className:"main-page",children:[Object(M.jsx)(R,{isDay:!1}),Object(M.jsx)(S,{}),Object(M.jsxs)("section",{className:"result-information",children:[Object(M.jsx)("h2",{className:"result-information__title",children:c}),Object(M.jsx)("ul",{className:"result-information__list",children:r.map((function(e,t){return Object(M.jsx)(T,{temperature:e.temperature,description:e.description,date:e.date},t)}))})]})]})}));var G=function(){return Object(M.jsx)(g.a,{children:Object(M.jsxs)(D.c,{children:[Object(M.jsx)(D.a,{exact:!0,path:W,children:Object(M.jsx)(z,{})}),Object(M.jsx)(D.a,{exact:!0,path:k,children:Object(M.jsx)(F,{})})]})})},H=N.a.create({baseURL:"https://api.openweathermap.org/data/2.5",timeout:5e3}),K=Object(i.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(d.a)(Object(d.a)({},e),{},{location:t.payload,isDataUpdated:!1});case p:return Object(d.a)(Object(d.a)({},e),{},{coordinates:t.payload});case f:return Object(d.a)(Object(d.a)({},e),{},{weekWeathers:t.payload});case b:return Object(d.a)(Object(d.a)({},e),{},{isLocationCorrect:t.payload});default:return e}}),Object(l.composeWithDevTools)(Object(i.applyMiddleware)(u.a.withExtraArgument(H))));r.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(s.a,{store:K,children:Object(M.jsx)(G,{})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.ae4f5593.chunk.js.map