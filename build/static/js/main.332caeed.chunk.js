(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{89:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(21),i=n.n(r),o=n(32),s=n(20),l=n(56),u=n(57),j=n(17),d="weather-app/setLocation",f="weather-app/setCoordinates",p="weather-app/setWeekWeathers",b="weather-app/setIsLocationCorrect",m="weather-app/setIsDataUpdated",h=function(e){return{type:d,payload:e}},O=function(e){return{type:f,payload:e}},x=function(e){return{type:p,payload:e}},v=function(e){return{type:b,payload:e}},g=function(e){return{type:m,payload:e}},y={location:"",coordinates:{lat:null,lng:null},weekWeathers:null,isLocationCorrect:!0,isDataUpdated:!1};var _=n(58),N=n.n(_),w=(n(89),n(38)),D=n(5),W="/",k="/week",C="19c1274fa4a283da3c684631c6063f69",L="weather",U="onecall",E=n(7);var Y=n(2);var A=Object(s.b)((function(e){return{location:e.location}}),(function(e){return{setLocation:function(t){e(h(t))}}}))((function(e){var t=e.setLocation,n=e.location,c=Object(a.useState)(n),r=Object(E.a)(c,2),i=r[0],o=r[1],s=function(e,t){var n=Object(a.useState)(e),c=Object(E.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){i(e)}),t);return function(){clearTimeout(n)}}),[e,t]),r}(i,500);return Object(a.useEffect)((function(){n!==s&&t(s)}),[s,t,n]),Object(Y.jsx)("form",{onSubmit:function(e){e.preventDefault()},className:"location-form",children:Object(Y.jsx)("input",{value:i,onChange:function(e){return function(e){e.preventDefault(),o(e.currentTarget.value)}(e)},className:"location-form__input",type:"text",placeholder:"Location name"})})}));function M(e){var t=e.temperature,n=e.description,a=e.date;return Object(Y.jsxs)("li",{className:"result-information__item",children:[Object(Y.jsx)("p",{className:"result-information__date",children:a}),Object(Y.jsx)("p",{className:"result-information__temperature",children:t}),Object(Y.jsx)("p",{className:"result-information__description",children:n})]})}var R=n(59),S=n.n(R),T=n(60),I=n.n(T),J=function(e){return function(t,n,a){a.get(L,{params:{q:e,appid:C}}).then((function(e){var n=e.data;t(O({lat:n.coord.lon,lon:n.coord.lon})),t(v(!0)),t(g(!1))})).catch((function(e){t(v(!1)),t(g(!0))}))}},q=function(e){var t=e.lat,n=e.lon;return function(e,a,c){c.get(U,{params:{lat:t,lon:n,exclude:"hourly,minutely",units:"metric",appid:C}}).then((function(t){var n=t.data;e(x(function(e){var t=S()(new Date),n=e.map((function(e,n){return{date:t.add(n,"day").format("D MMMM YYYY"),temperature:Math.round(e.temp.day),description:e.weather[0].main}}));return n.pop(),n}(n.daily.slice()))),e(g(!0))})).catch((function(){return I()("An error occurred while loading data")}))}};function B(e){var t=e.isDay,n=Object(D.f)();return Object(Y.jsxs)("div",{className:"change-buttons",children:[Object(Y.jsx)("button",{className:"change-buttons__item ".concat(t?"change-buttons__item--active":""),onClick:function(){n.push(W)},children:"Day"}),Object(Y.jsx)("button",{className:"change-buttons__item ".concat(t?"":"change-buttons__item--active"),onClick:function(){n.push(k)},children:"Week"})]})}var P=n(33),z=function(e){var t=e.isRevertAnimation,n=e.children,a=e.animRef,c=void 0===a?void 0:a,r=Object(P.useSpring)({config:Object(j.a)(Object(j.a)({},P.config.stiff),{},{friction:40}),ref:c,from:{translateY:t?100:0},to:{translateY:t?0:100}}).translateY;return Object(Y.jsx)("div",{className:"animation-text",children:Object(Y.jsx)(P.a.div,{style:{transform:r.interpolate((function(e){return"translateY(".concat(e,"%)")}))},children:n})})};var F=Object(s.b)((function(e){return{locationName:e.location,coordinates:e.coordinates,weekWeathers:e.weekWeathers,isDataUpdated:e.isDataUpdated,isLocationCorrect:e.isLocationCorrect}}),(function(e){return{getCoordinates:function(t){e(O({lat:null,lon:null})),e(x(null)),e(J(t))},setWeekWeather:function(t){e(q(t))}}}))((function(e){var t=e.getCoordinates,n=e.setWeekWeather,c=e.locationName,r=e.coordinates,i=e.weekWeathers,o=e.isDataUpdated,s=e.isLocationCorrect;return Object(a.useEffect)((function(){""===c||o||t(c)}),[t,c,o]),Object(a.useEffect)((function(){null===r.lat||null===r.lon||o||n(r)}),[n,r,o]),null==i?Object(Y.jsxs)("main",{className:"main-page",children:[Object(Y.jsx)(B,{isDay:!0}),Object(Y.jsx)(A,{}),Object(Y.jsx)("section",{className:"result-information",children:!s&&Object(Y.jsx)("p",{children:"Location not found"})})]}):Object(Y.jsxs)("main",{className:"main-page",children:[Object(Y.jsx)(B,{isDay:!0}),Object(Y.jsx)(A,{}),Object(Y.jsxs)("section",{className:"result-information",children:[Object(Y.jsx)(z,{isRevertAnimation:!0,children:Object(Y.jsx)("h2",{className:"result-information__title",children:c})}),Object(Y.jsx)(z,{isRevertAnimation:!0,children:Object(Y.jsx)("ul",{className:"result-information__list",children:Object(Y.jsx)(M,{temperature:i[0].temperature,description:i[0].description,date:i[0].date})})})]})]})}));var G=Object(s.b)((function(e){return{locationName:e.location,coordinates:e.coordinates,weekWeathers:e.weekWeathers,isDataUpdated:e.isDataUpdated,isLocationCorrect:e.isLocationCorrect}}),(function(e){return{getCoordinates:function(t){e(O({lat:null,lon:null})),e(x(null)),e(J(t))},setWeekWeather:function(t){e(q(t))}}}))((function(e){var t=e.getCoordinates,n=e.setWeekWeather,c=e.locationName,r=e.coordinates,i=e.weekWeathers,o=e.isDataUpdated,s=e.isLocationCorrect;return Object(a.useEffect)((function(){o||""===c||t(c)}),[t,c,o]),Object(a.useEffect)((function(){null===r.lat||null===r.lon||o||n(r)}),[n,r,o]),null==i?Object(Y.jsxs)("main",{className:"main-page",children:[Object(Y.jsx)(B,{isDay:!1}),Object(Y.jsx)(A,{}),Object(Y.jsx)("section",{className:"result-information",children:!s&&Object(Y.jsx)("p",{children:"Location not found"})})]}):Object(Y.jsxs)("main",{className:"main-page",children:[Object(Y.jsx)(B,{isDay:!1}),Object(Y.jsx)(A,{}),Object(Y.jsxs)("section",{className:"result-information",children:[Object(Y.jsx)(z,{isRevertAnimation:!0,children:Object(Y.jsx)("h2",{className:"result-information__title",children:c})}),Object(Y.jsx)(z,{isRevertAnimation:!0,children:Object(Y.jsx)("ul",{className:"result-information__list",children:i.map((function(e,t){return Object(Y.jsx)(M,{temperature:e.temperature,description:e.description,date:e.date},t)}))})})]})]})}));function H(){return Object(Y.jsxs)("main",{className:"main-page",children:[Object(Y.jsx)("h1",{className:"page-not-found__title",children:"404"}),Object(Y.jsx)("p",{className:"page-not-found__text",children:"Page not found"})]})}var K=function(){return Object(Y.jsx)(w.a,{children:Object(Y.jsxs)(D.c,{children:[Object(Y.jsx)(D.a,{exact:!0,path:W,children:Object(Y.jsx)(F,{})}),Object(Y.jsx)(D.a,{exact:!0,path:k,children:Object(Y.jsx)(G,{})}),Object(Y.jsx)(D.a,{children:Object(Y.jsx)(H,{})})]})})},Q=N.a.create({baseURL:"https://api.openweathermap.org/data/2.5",timeout:5e3}),V=Object(o.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(j.a)(Object(j.a)({},e),{},{location:t.payload,isDataUpdated:!1});case f:return Object(j.a)(Object(j.a)({},e),{},{coordinates:t.payload});case p:return Object(j.a)(Object(j.a)({},e),{},{weekWeathers:t.payload});case b:return Object(j.a)(Object(j.a)({},e),{},{isLocationCorrect:t.payload});default:return e}}),Object(l.composeWithDevTools)(Object(o.applyMiddleware)(u.a.withExtraArgument(Q))));i.a.render(Object(Y.jsx)(c.a.StrictMode,{children:Object(Y.jsx)(s.a,{store:V,children:Object(Y.jsx)(K,{})})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.332caeed.chunk.js.map